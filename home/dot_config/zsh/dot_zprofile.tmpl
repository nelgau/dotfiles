# zsh
export SHELL_SESSION_DIR=$XDG_STATE_HOME/zsh/sessions
export SHELL_SESSION_FILE=$SHELL_SESSION_DIR/$TERM_SESSION_ID

##
# Homebrew
##

# Discover the prefix without brew
{{ if stat "/opt/homebrew/bin/brew" -}}
export HOMEBREW_PREFIX=/opt/homebrew
{{ else if stat "/usr/local/bin/brew" -}}
export HOMEBREW_PREFIX=/usr/local
{{ end -}}

# Activate shell environment
export HOMEBREW_NO_ENV_HINTS=1
eval "$($HOMEBREW_PREFIX/bin/brew shellenv)"
FPATH="${HOMEBREW_PREFIX}/share/zsh/site-functions:${FPATH}"

# Use the installed binaries rather than the system versions
export PATH="${HOMEBREW_PREFIX}/opt/coreutils/libexec/gnubin:${PATH}"
export PATH="${HOMEBREW_PREFIX}/opt/findutils/libexec/gnubin:${PATH}"
export PATH="${HOMEBREW_PREFIX}/opt/make/libexec/gnubin:${PATH}"
