#!/bin/bash
set -ufo pipefail

SESSION="chezmoi"
START_DIR="$HOME/.local/share/chezmoi"
SESSION_EXISTS=$(tmux list-session | grep $SESSION)

if [[ -z $SESSION_EXISTS ]]; then
    tmux new-session -d -s $SESSION -c $START_DIR "nvim +'NERDTree'"
    tmux split-window -t $SESSION:0 -h -c $START_DIR
    tmux rename-window -t $SESSION:0 editor
fi

tmux select-pane -t $SESSION:0.0
tmux select-window -t $SESSION:0
tmux switch-client -t $SESSION
